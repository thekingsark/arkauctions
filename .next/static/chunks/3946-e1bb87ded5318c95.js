"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3946],{47220:(t,e,a)=>{a.d(e,{q:()=>i});var s=a(95155),n=a(28144),r=a(47468),o=a(99512);let i=(0,a(90908).PA)(t=>{let e=(0,o.A)().currentLanguage,{t:a}=(0,n.B)(e),i=r.t.loggedInAccounts.includes(t.accountId);return(0,s.jsx)("div",{className:"account-status-circle ".concat(i?"logged-in-account":"logged-out-account"),title:a(i?"generic.online":"generic.offline")})})},11422:(t,e,a)=>{a.d(e,{X:()=>o});var s=a(21455),n=a.n(s),r=a(99512);a(83552),a(43272),a(36319),a(82855),a(57994),a(61550),a(93348),a(77776),a(18592),a(5159),a(8282),a(62133),a(80945),a(91116),a(17807),a(73319);let o=t=>{let e=(0,r.A)().currentLanguage,{date:a,format:s}=t;return n()(a).locale(e).format(s)}},7087:(t,e,a)=>{a.d(e,{C:()=>l});var s=a(95155),n=a(12115),r=a(28144),o=a(84534),i=a(13572),c=a(99512);let d=t=>{let{isOpened:e,close:a}=t,n=(0,c.A)().currentLanguage,{t:d}=(0,r.B)(n);return(0,s.jsxs)(o.j,{open:e,onClose:a,styles:{modal:{maxWidth:"450px",backgroundColor:"var(--background_2)"},overlay:{background:"rgba(0, 0, 0, 0.5)"}},classNames:{modal:"info-modal"},closeIcon:(0,s.jsx)(i.I,{type:"generic/close-filled"}),center:!0,children:[(0,s.jsx)("p",{children:d("verification.account_verification")}),(0,s.jsx)("p",{children:d("verification.verified_info")}),(0,s.jsx)("div",{className:"mt-20 d-flex justify-content-between gap-3 mt-10",children:(0,s.jsx)("button",{className:"btn w-100 fill-btn",type:"submit",onClick:a,"aria-label":d("generic.ok"),children:d("generic.ok")})})]})},l=t=>{let{verified:e=!1,size:a=24}=t,[r,o]=(0,n.useState)(!1);return e?(0,s.jsxs)("div",{className:"verified-badge",onClick:t=>{t.stopPropagation(),t.preventDefault(),o(!r)},children:[(0,s.jsx)(i.I,{type:"generic/verified",size:a}),(0,s.jsx)(d,{isOpened:r,close:()=>{o(!1)}})]}):null}},88181:(t,e,a)=>{a.d(e,{v:()=>p,W:()=>A});var s=a(37725),n=a(8420),r=a(72772);class o{static fromJSON(t){let e=t.firstAccount?n.gD.fromJSON(t.firstAccount):void 0,a=t.secondAccount?n.gD.fromJSON(t.secondAccount):void 0,s=t.lastMessageAt?new Date(t.lastMessageAt.toString()):void 0,i=t.chatGroupAuctions?t.chatGroupAuctions.map(t=>r.e7.fromJSON(t)):void 0;return new o({id:t.id,firstAccountId:t.firstAccountId,secondAccountId:t.secondAccountId,createdAt:t.createdAt?new Date(t.createdAt.toString()):new Date,updatedAt:t.updatedAt?new Date(t.updatedAt.toString()):new Date,firstAccount:e,secondAccount:a,lastMessageAt:s,chatGroupAuctions:i,unreadMessages:t.unreadMessages})}constructor(t){this.id=t.id,this.firstAccountId=t.firstAccountId,this.secondAccountId=t.secondAccountId,this.createdAt=t.createdAt,this.updatedAt=t.updatedAt,this.firstAccount=t.firstAccount,this.secondAccount=t.secondAccount,this.lastMessageAt=t.lastMessageAt,this.unreadMessages=t.unreadMessages,this.chatGroupAuctions=t.chatGroupAuctions,(0,s.l_)(this)}}var i=a(39203),c=a(86237);class d{async sendAssetsMessage(t,e){try{let a=new FormData;for(let t=0;t<e.length;t++)a.append("files",e[t]);a.set("id",t.id),a.set("groupId",t.chatGroupId);let s=await c.w.makeRequest({path:"".concat(this.basePath,"/message/new/assets"),method:c.Y.POST,payload:a,contentType:"multipart/form-data"});return i.c.fromJSON(s)}catch(t){return console.error("Error sending assets message:",t),null}}async sendMessage(t){try{let e=await c.w.makeRequest({path:"".concat(this.basePath,"/message/new"),method:c.Y.POST,payload:JSON.stringify({message:t.message,id:t.id,groupId:t.chatGroupId}),contentType:"application/json"});return i.c.fromJSON(e)}catch(t){return console.error("Error sending message:",t),null}}async removeMessages(t,e){try{await c.w.makeRequest({path:"".concat(this.basePath,"/delete/messages/").concat(t),method:c.Y.POST,payload:JSON.stringify({messagesIds:e}),contentType:"application/json"})}catch(t){console.error("Error removing messages:",t)}}async translate(t,e){try{return await c.w.makeRequest({path:"".concat(this.basePath,"/translate/").concat(t,"/").concat(e),method:c.Y.GET})}catch(t){return console.error("Error translating chat message:",t),null}}async loadById(t){try{let e=await c.w.makeRequest({path:"".concat(this.basePath,"/").concat(t),method:c.Y.GET});return o.fromJSON(e)}catch(t){return console.error("Error loading chat group:",t),null}}async loadMessagesForGroup(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;try{return(await c.w.makeRequest({path:"".concat(this.basePath,"/messages/").concat(t,"/").concat(e,"/").concat(a),method:c.Y.GET})).map(t=>i.c.fromJSON(t))}catch(t){return console.error("Error loading chat messages:",t),[]}}async markMessagesAsSeen(t){try{await c.w.makeRequest({path:"".concat(this.basePath,"/seen/").concat(t),method:c.Y.PUT})}catch(t){console.error("Error marking messages as seen:",t)}}async loadGroupsForAccount(){try{return(await c.w.makeRequest({path:this.basePath,method:c.Y.GET})).map(t=>o.fromJSON(t))}catch(t){return console.error("Error loading chat groups:",t),[]}}async sendMessageToAccount(t){try{return(await c.w.makeRequest({path:"".concat(this.basePath,"/sendMessage/").concat(t),method:c.Y.POST})).sent}catch(t){return console.error("Error sending message to account:",t),!1}}async loadForTwoAccounts(t,e){try{let a=await c.w.makeRequest({path:"".concat(this.basePath,"/").concat(t,"/").concat(e),method:c.Y.GET});return o.fromJSON(a)}catch(t){return console.error("Error loading chat group for two accounts:",t),null}}async createOrLoadWithAccount(t,e){try{let a=await c.w.makeRequest({path:"".concat(this.basePath,"/").concat(t),method:c.Y.POST,...e?{payload:JSON.stringify({auctionId:e})}:{}});return o.fromJSON(a)}catch(t){return console.error("Error creating or loading chat group with account:",t),null}}constructor(){this.basePath="/chat-group"}}let l=new d;var u=a(47468),h=a(46571);let A=30;class g{async init(){this.isInitialized||(await this.loadChatGroups(),this.isInitialized=!0,h.C.setHandler(h.s.newMessage,this.handleNewMessageReceived),h.C.setHandler(h.s.newChatGroup,this.handleNewChatGroup),h.C.setHandler(h.s.messagesRemoved,this.handleMessagesRemoved))}async loadChatGroups(){let t=await l.loadGroupsForAccount();for(let e of((0,s.h5)(()=>{u.t.chatGroups=[],u.t.chatGroups=[...u.t.chatGroups,...t]}),t))await this.loadMessagesForGroup(e.id,0,A)}async loadMessagesForGroup(t){var e;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(0===a&&(null===(e=u.t.chatMessages[t])||void 0===e?void 0:e.length))return;let o=await l.loadMessagesForGroup(t,a,n);for(let e of(o.sort((t,e)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()),u.t.chatMessages[t]&&0!==a||(0,s.h5)(()=>{u.t.chatMessages[t]=[]}),r?o:o.reverse()))u.t.chatMessages[t].find(t=>t.id===e.id)||(0,s.h5)(()=>{r?u.t.chatMessages[t].unshift(e):u.t.chatMessages[t].push(e)})}async sendMessage(t,e){let{chatGroupId:a}=t;(0,s.h5)(()=>{u.t.chatMessages[a]||(u.t.chatMessages[a]=[]),u.t.chatMessages[a].push(t);let e=u.t.chatGroups.find(t=>t.id===a);e&&(e.lastMessageAt=t.createdAt)});let n=(null==e?void 0:e.length)?await l.sendAssetsMessage(t,e):await l.sendMessage(t);(0,s.h5)(()=>{var e;let s=u.t.chatMessages[a].find(e=>e.id===t.id);s&&(s.status=n?i.e.sent:i.e.error,(null==n?void 0:null===(e=n.assetPaths)||void 0===e?void 0:e.length)&&(s.assetPaths=null==n?void 0:n.assetPaths))})}async openChatGroupWithAccount(t){try{let e=await this.createOrLoadChatGroupWithAccount(t);if(!e)return!1;return this.openChatGroup(e),!0}catch(t){return console.error("Could not open chat group:",t),!1}}openChatGroup(t){u.t.openedChatGroups.find(e=>e.id===t.id)||((0,s.h5)(()=>{u.t.openedChatGroups.length>=2&&u.t.openedChatGroups.shift(),u.t.openedChatGroups.push(t)}),this.markMessagesAsSeen(t.id))}closeChatGroup(t){(0,s.h5)(()=>{u.t.openedChatGroups=u.t.openedChatGroups.filter(e=>e.id!==t)})}async markMessagesAsSeen(t){let e=!1,a=u.t.chatGroups.find(e=>e.id==t);if(a&&(a.unreadMessages=0,u.t.chatMessages[t])){for(let a of u.t.chatMessages[t])(0,s.h5)(()=>{a.seenAt||(e=!0,a.seenAt=new Date)});e&&await l.markMessagesAsSeen(t)}}updateChatGroupLastMessageWithLatestMessage(t){(0,s.h5)(()=>{let e=u.t.chatGroups.values().find(e=>e.id==t);if(!e)return;let a=u.t.chatMessages[t];if(!a)return;let s=a.length?a[a.length-1]:null;s&&(e.lastMessageAt=s.createdAt)})}constructor(){this.isInitialized=!1,this.translateMessage=async(t,e)=>l.translate(t,e),this.handleNewChatGroup=async t=>{let e=o.fromJSON(t);u.t.chatGroups.find(t=>t.id===e.id)||(0,s.h5)(()=>{u.t.chatGroups=[e,...u.t.chatGroups],u.t.chatMessages[e.id]=[]})},this.handleNewMessageReceived=async t=>{let e=i.c.fromJSON(t),a=e.chatGroupId;(0,s.h5)(()=>{u.t.chatMessages[a]||(u.t.chatMessages[a]=[]),u.t.chatMessages[a].push(e);let t=u.t.chatGroups.values().find(t=>t.id==a),s=u.t.openedChatGroups.find(t=>t.id===a);if(t&&!s){var n;t.unreadMessages=(null!==(n=t.unreadMessages)&&void 0!==n?n:0)+1}})},this.loadForTwoAccounts=async(t,e)=>{try{let a=await l.loadForTwoAccounts(t,e);if(!a)return;u.t.chatGroups.find(t=>t.id===a.id)||(0,s.h5)(()=>{u.t.chatGroups=[a,...u.t.chatGroups],u.t.chatMessages[a.id]=[]})}catch(a){console.error("Could not load chat group for accounts:",t,e,a)}},this.handleMessagesRemoved=t=>{let{groupId:e,messagesIds:a}=t,n=u.t.chatGroups.values().find(t=>t.id==e);if(!n)return;let r=u.t.chatMessages[e];if(r){for(let t of a){let a=r.find(e=>e.id==t);if(a&&null==a.seenAt){var o;n.unreadMessages=(null!==(o=n.unreadMessages)&&void 0!==o?o:1)-1}a&&(0,s.h5)(()=>{u.t.chatMessages[e]=r.filter(e=>e.id!==t)})}this.updateChatGroupLastMessageWithLatestMessage(e)}},this.createOrLoadChatGroupWithAccount=async(t,e)=>{let a=u.t.chatGroups.find(e=>e.firstAccountId===t||e.secondAccountId===t);if(a){var n;return a.chatGroupAuctions||(a.chatGroupAuctions=[]),(null===(n=a.chatGroupAuctions)||void 0===n?void 0:n.some(t=>t.id===(null==e?void 0:e.id)))||!e||((0,s.h5)(()=>{var t;a.chatGroupAuctions=[e,...null!==(t=a.chatGroupAuctions)&&void 0!==t?t:[]]}),l.createOrLoadWithAccount(t,e.id)),a}try{let a=await l.createOrLoadWithAccount(t,null==e?void 0:e.id);if(!a)return null;return(0,s.h5)(()=>{u.t.chatGroups=[a,...u.t.chatGroups],u.t.chatMessages[a.id]=[]}),a}catch(t){return console.error("Could not create chat group:",t),null}}}}let p=new g},39203:(t,e,a)=>{a.d(e,{c:()=>r,e:()=>n});var s=a(37725),n=function(t){return t[t.pending=0]="pending",t[t.sent=1]="sent",t[t.error=2]="error",t}({});class r{static fromJSON(t){return new r({id:t.id,chatGroupId:t.chatGroupId,fromAccountId:t.fromAccountId,message:t.message,type:t.type,latitude:t.latitude,longitude:t.longitude,assetPaths:t.assetPaths,seenAt:t.seenAt?new Date(t.seenAt.toString()):void 0,createdAt:t.createdAt?new Date(t.createdAt.toString()):new Date,updatedAt:t.updatedAt?new Date(t.updatedAt.toString()):new Date})}constructor(t){var e,a,n;this.id=t.id,this.chatGroupId=t.chatGroupId,this.fromAccountId=t.fromAccountId,this.message=t.message,this.createdAt=t.createdAt,this.updatedAt=t.updatedAt,this.fileList=t.fileList,this.status=null!==(e=t.status)&&void 0!==e?e:1,this.type=null!==(a=t.type)&&void 0!==a?a:"text",this.assetPaths=null!==(n=t.assetPaths)&&void 0!==n?n:[],this.latitude=t.latitude,this.longitude=t.longitude,this.seenAt=t.seenAt,(0,s.l_)(this)}}},88860:(t,e,a)=>{a.d(e,{$g:()=>r,GP:()=>u,LL:()=>i,N7:()=>l,V9:()=>s,X_:()=>c,b$:()=>n,gg:()=>d,xB:()=>o});let s=t=>{var e;if(t.acceptedBidAt)return new Date(t.acceptedBidAt);if(t.expiresAt)return t.expiresAt;let a=t.createdAt;"string"==typeof a&&(a=new Date(a));try{a.getTime()}catch(t){return console.error("Invalid date format",t),null}return new Date((null!==(e=null==a?void 0:a.getTime())&&void 0!==e?e:-96)+3456e5)},n=function(t){var e;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:96,s=t.createdAt;"string"==typeof s&&(s=new Date(s));try{s.getTime()}catch(t){return console.error("Invalid date format",t),!1}let n=new Date((null!==(e=null==s?void 0:s.getTime())&&void 0!==e?e:-a)+36e5*a),r=new Date,o=Number(n)-Number(r),i=null!=t.acceptedBidId;return!t.isActive||o<0||i},r=(t,e,a)=>new Intl.NumberFormat(e,{style:"currency",currency:a}).format(t),o=t=>t.name?t.name:i(t),i=t=>{var e,a,s,n,r,o;let i=null===(e=t.address_components)||void 0===e?void 0:e.find(t=>t.types.includes("locality"));return i||(i=null===(a=t.address_components)||void 0===a?void 0:a.find(t=>t.types.includes("sublocality")||t.types.includes("postal_town")||t.types.includes("administrative_area_level_3"))),i||(i=null===(s=t.address_components)||void 0===s?void 0:s.find(t=>t.types.includes("administrative_area_level_2"))),i||(i=null===(n=t.address_components)||void 0===n?void 0:n.find(t=>t.types.includes("administrative_area_level_1"))),i||(i=null===(r=t.address_components)||void 0===r?void 0:r.find(t=>t.types.includes("country"))),null!==(o=null==i?void 0:i.long_name)&&void 0!==o?o:"Unknown"},c=(t,e,a,s)=>{let n=(a-t)*Math.PI/180,r=(s-e)*Math.PI/180,o=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))*6371},d=t=>0===t.length?0:t.reduce((t,e)=>t+e.stars,0)/t.length,l=t=>{var e,a,s;if(null==t)return"Unknown";if(null!==t.name&&""!==t.name)return(null===(e=t.name)||void 0===e?void 0:e.length)>50?t.name.substring(0,50):t.name;if(""!==t.email){let e=null===(a=t.email)||void 0===a?void 0:a.indexOf("@");return -1!==e?null===(s=t.email)||void 0===s?void 0:s.substring(0,e):t.email}return"Unknown"},u=t=>{if(t.dataTransfer.items){let e=[];for(let a=0;a<t.dataTransfer.items.length;a+=1)"file"===t.dataTransfer.items[a].kind&&e.push(t.dataTransfer.items[a].getAsFile());return e}return t.dataTransfer.files}},60443:(t,e,a)=>{a.r(e),a.d(e,{default:()=>s});let s={src:"/_next/static/media/default-item.de186be7.jpeg",height:500,width:500,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/2wBDAQoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAACqg//EABgQAAIDAAAAAAAAAAAAAAAAAAASISIx/9oACAEBAAE/ALNkH//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Af//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Af//Z",blurWidth:8,blurHeight:8}}}]);