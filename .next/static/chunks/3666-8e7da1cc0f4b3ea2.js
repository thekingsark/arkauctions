"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3666],{50588:(e,t,a)=>{a.d(t,{v:()=>c});var n=a(95155),s=a(28144),i=a(84534),l=a(13572),r=a(99512);let o=(0,a(77711).default)(()=>a.e(5209).then(a.bind(a,35209)),{loadableGenerated:{webpack:()=>[35209]},ssr:!1,loading:()=>(0,n.jsx)("div",{className:"loader-wrapper",children:(0,n.jsx)(l.I,{type:"loading",color:"var(--font_1)",size:40})})}),c=e=>{let t=(0,r.A)().currentLanguage,{t:a}=(0,s.B)(t),{isOpened:c,setOpened:d,assets:u,title:m}=e,g=u.map(e=>({url:"string"==typeof e?e:e.hasOwnProperty("id")?"".concat("http://localhost:7777","/assets/").concat(e.path):URL.createObjectURL(e)}));return(0,n.jsxs)(i.j,{closeOnOverlayClick:!1,closeOnEsc:!1,open:c,onClose:()=>{d(!1)},styles:{modal:{maxWidth:"90%",width:"90%",backgroundColor:"var(--background_2)"},overlay:{background:"rgba(0, 0, 0, 0.5)"}},classNames:{},closeIcon:(0,n.jsx)(l.I,{type:"generic/close-filled"}),center:!0,children:[(0,n.jsxs)("div",{className:"d-flex align-items-center justify-content-between mt-10 mb-20",children:[(0,n.jsx)("h4",{children:null!=m?m:a("assets.selected_images")}),(0,n.jsx)("span",{children:a(1===g.length?"assets.image_singular":"assets.image_plural",{no:g.length})})]}),(0,n.jsx)(o,{assets:g})]})}},50165:(e,t,a)=>{a.d(t,{W:()=>l});var n=a(95155),s=a(13572),i=a(12115);let l=e=>{let[t,a]=(0,i.useState)(!0),{message:l,isError:r}=e;return t?(0,n.jsxs)("div",{className:"".concat(r?"alert alert-danger":""," d-flex align-items-center justify-content-between w-100"),children:[(0,n.jsxs)("span",{children:[" ",l]}),(0,n.jsx)("div",{className:"close-icon-wrapper d-flex align-items-center",onClick:()=>a(!1),children:(0,n.jsx)(s.I,{type:"generic/close-filled"})})]}):null}},43666:(e,t,a)=>{a.d(t,{AuctionForm:()=>ee});var n=a(95155),s=a(12115),i=a(99512),l=a(28144),r=a(91068),o=a(58803),c=a.n(o),d=a(84534),u=a(13572);let m=e=>{let t=(0,i.A)(),a=t.currentLanguage,{t:o}=(0,l.B)(a),[m,g]=(0,s.useState)(""),{isOpened:x,close:p}=e;return(0,n.jsxs)(d.j,{open:x,onClose:p,styles:{modal:{maxWidth:"550px",backgroundColor:"var(--background_2)"},overlay:{background:"rgba(0, 0, 0, 0.5)"}},classNames:{modal:"info-modal"},closeIcon:(0,n.jsx)(u.I,{type:"generic/close-filled"}),center:!0,children:[(0,n.jsx)("h4",{className:"jsx-bde1cb53e9ba470d",children:o("create_auction.starting_price")}),(0,n.jsx)("div",{className:"jsx-bde1cb53e9ba470d mt-40",children:(0,n.jsx)("input",{type:"number",min:1,max:5e3,name:"custom_book_title",value:m,required:!0,onChange:e=>g(e.target.value),placeholder:o("create_auction.add_starting_price"),className:"jsx-bde1cb53e9ba470d custom-price-input"})}),(0,n.jsxs)("div",{className:"jsx-bde1cb53e9ba470d d-flex align-items-center justify-content-between mt-40",children:[(0,n.jsx)("button",{onClick:p,"aria-label":o("generic.cancel"),className:"jsx-bde1cb53e9ba470d",children:o("generic.cancel")}),(0,n.jsx)("button",{onClick:()=>{if(!m){r.oR.error(o("create_auction.price_cannot_be_empty"));return}try{var a,n;let s=parseFloat(m);if(s<1||s>((null===(a=t.appSettings)||void 0===a?void 0:a.maxProductPrice)||1e7)){r.oR.error(o("create_auction.starting_price_condition",{maxPrice:(null===(n=t.appSettings)||void 0===n?void 0:n.maxProductPrice)||1e7}));return}e.handleSubmit(s)}catch(e){console.error("Failed to parse price: ".concat(e)),r.oR.error(o("create_auction.invalid_starting_price"));return}},"aria-label":o("generic.done"),className:"jsx-bde1cb53e9ba470d btn fill-btn",children:o("generic.done")})]}),(0,n.jsx)(c(),{id:"bde1cb53e9ba470d",children:".custom-price-input.jsx-bde1cb53e9ba470d{border:1px solid var(--separator);-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;height:60px;background:var(--background_4);color:var(--font_1);font-size:16px;padding:8px 16px;outline:none;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;width:100%;margin:0!important}"})]})};var g=a(50165),x=a(18082);let p=e=>{let{formIsValid:t,formSubmitTries:a,rootRef:r,isCustomPriceSelected:o=!1,setPrice:c,initialCurrencyId:d}=e,u=(0,i.A)().currentLanguage,{t:p}=(0,l.B)(u),[f,h]=(0,s.useState)(e.selectedPrice),[b,v]=(0,s.useState)(o),[j,y]=(0,s.useState)(!1),[w,_]=(0,s.useState)(!1),N=e=>{v(!1),h(e),c(e,!1)},k=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,n.jsx)("li",{className:"create-auction-price-item ".concat(f!==e||b?"":"selected-price","\n        ").concat(t?"d-sm-inline-flex d-none":"","\n        "),onClick:()=>{N(e)},children:(0,n.jsx)("div",{className:"filter-list-item d-flex align-items-center",children:(0,n.jsx)("label",{className:"ml-10 mr-10 mb-0",children:(0,n.jsx)(x.J,{price:e,initialCurrencyIsSameAsTargetCurrency:!0})})})})};return(0,n.jsxs)("div",{className:"mt-40",ref:r,children:[(0,n.jsx)("div",{className:"d-flex flex-row justify-content-between align-items-center mb-10",children:(0,n.jsx)("label",{className:"mb-0 create-auction-label",children:p("create_auction.starting_price")})}),(0,n.jsxs)("ul",{className:"d-flex gap-2",children:[k(5,!0),k(10),k(15),(0,n.jsx)("li",{className:"create-auction-price-item ".concat(b?"selected-price":""),onClick:()=>{y(!0)},children:(0,n.jsx)("div",{className:"filter-list-item d-flex align-items-center",children:(0,n.jsx)("label",{className:"ml-10 mb-0",children:b&&null!==f?(0,n.jsx)("span",{children:(0,n.jsx)(x.J,{price:null!=f?f:0,...d&&!w?{initialCurrencyId:d}:{},initialCurrencyIsSameAsTargetCurrency:!d})}):p("create_auction.another_starting_price")})})})]}),(0,n.jsx)(m,{close:()=>y(!1),isOpened:j,handleSubmit:e=>{v(!0),h(e),c(e,!0),y(!1),_(!0)}}),!t&&null===f&&!!a&&(0,n.jsx)("div",{className:"mt-10",children:(0,n.jsx)(g.W,{message:p("create_auction.price_required"),isError:!0},a)})]})};var f=a(76046),h=a(82722),b=a(18152),v=a(47468);let j=e=>{var t,a,r,o;let{inputRef:c,formIsValid:d,formSubmitTries:m,useLocationDetection:x=!0,setLocation:p}=e,f=(0,i.A)().currentLanguage,{t:j}=(0,l.B)(f),[y,w]=(0,s.useState)(e.initialLocation),[_,N]=(0,s.useState)(!1),k=(0,s.useRef)(!1);(0,s.useEffect)(()=>{e.initialLocation&&w(e.initialLocation)},[e.initialLocation]),(0,s.useEffect)(()=>{k.current||(S(),k.current=!0)});let S=async()=>{var e,t,a;if(null===(e=v.t.accountData)||void 0===e?void 0:e.locationLatLng){let{lat:e,lng:n}=null!==(a=null===(t=v.t.accountData)||void 0===t?void 0:t.locationLatLng)&&void 0!==a?a:{},s=await b.Z.getPlaceDetailsFromLatLng(e,n);w(s),p(s);return}C()},C=async()=>{if(!_&&x){N(!0);try{let e=await b.Z.getLocationFromCurrentDevice();e&&(w(e),p(e))}catch(e){console.error("Failed to get device location: ".concat(e))}finally{N(!1)}}},D=async e=>{if(!e){w(null),p(null);return}let t=await b.Z.getGooglePlaceDetails(e.reference);w(t),p(t)};return(0,n.jsxs)("div",{className:"mt-40",children:[(0,n.jsx)("div",{className:"d-flex flex-row justify-content-between align-items-center mb-10",children:(0,n.jsx)("label",{className:"mb-0 create-auction-label",children:j("location.location")})}),(0,n.jsx)("div",{ref:c,children:(0,n.jsx)(h.H,{selectedLocation:y,searchInProgress:_,onLocationPicked:D})}),(0,n.jsxs)("div",{className:"pos-rel mt-10",children:[y?(0,n.jsx)("iframe",{title:"location",className:"w-100",style:{borderRadius:6},src:"https://www.google.com/maps?q=".concat(null==y?void 0:null===(a=y.geometry)||void 0===a?void 0:null===(t=a.location)||void 0===t?void 0:t.lat,",").concat(null==y?void 0:null===(o=y.geometry)||void 0===o?void 0:null===(r=o.location)||void 0===r?void 0:r.lng,"&z=15&output=embed")}):(0,n.jsxs)("div",{className:"no-location-container",children:[(0,n.jsx)(u.I,{type:"generic/map",size:64}),(0,n.jsx)("span",{className:"mt-20",children:j("info.location_needed")})]}),!d&&!y&&!!m&&(0,n.jsx)("div",{className:"mt-10",children:(0,n.jsx)(g.W,{message:j("create_auction.location_required"),isError:!0},m)})]})]})};var y=a(88860);let w=e=>{let t=e=>{var t,a,n;(null===(n=e.dataTransfer)||void 0===n?void 0:null===(a=n.items)||void 0===a?void 0:null===(t=a[0])||void 0===t?void 0:t.kind)==="file"&&(e.preventDefault(),e.stopPropagation())},a=e=>{e.preventDefault(),e.stopPropagation()},i=e=>{e.preventDefault(),e.stopPropagation()},l=t=>{var a,n,s;if((null===(s=t.dataTransfer)||void 0===s?void 0:null===(n=s.items)||void 0===n?void 0:null===(a=n[0])||void 0===a?void 0:a.kind)==="file"){t.preventDefault(),t.stopPropagation();let a=(0,y.GP)(t);e.onUpload(a)}};return(0,s.useEffect)(()=>(window.addEventListener("dragover",t),window.addEventListener("dragleave",a),window.addEventListener("dragenter",i),window.addEventListener("drop",l),()=>{window.removeEventListener("dragover",t),window.removeEventListener("dragleave",a),window.removeEventListener("dragenter",i),window.removeEventListener("drop",l)}),[]),(0,n.jsx)(n.Fragment,{})};var _=a(50588);let N=e=>{let{onFilesPick:t,accept:a,multiple:i,children:l,disabled:r,hidden:o}=e,c=s.useRef(null),d=s.useCallback(()=>{c&&c.current&&c.current.click()},[c]),u=s.useCallback(()=>{c.current&&!r&&t(c.current.files)},[c,r,t]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{onChange:u,onClick:e=>{e.currentTarget.value=""},ref:c,type:"file",accept:a,disabled:r,multiple:i,className:"file-input"}),!o&&(0,n.jsx)("div",{className:"assets-upload mt-20",onClick:d,children:(0,n.jsx)("div",{className:"assets-upload-inner",children:(0,n.jsx)("p",{className:"mb-0",children:l})})})]})};var k=a(1247),S=a(35476);let C=e=>{let t=(0,i.A)().currentLanguage,{t:a}=(0,l.B)(t),{assets:r,handleRemoveAsset:o,handleClick:d}=e,[m,g]=(0,s.useState)(r.length);(0,s.useEffect)(()=>{g(e.assets.length)},[e.assets]);let x=(e,t)=>{let s=e.hasOwnProperty("id")?"".concat("http://localhost:7777","/assets/").concat(e.path):URL.createObjectURL(e);return(0,n.jsxs)("div",{style:{backgroundImage:"url(".concat(s,")")},onClick:()=>d(t),className:"jsx-4fcffd91897b9e19 uploaded-image",children:[!!o&&(0,n.jsx)("button",{onClick:e=>{o(t),e.stopPropagation()},className:"jsx-4fcffd91897b9e19 fill-btn remove-asset-button",children:(0,n.jsxs)("span",{className:"jsx-4fcffd91897b9e19",children:[" ",a("generic.remove")]})}),(0,n.jsx)(c(),{id:"4fcffd91897b9e19",children:".uploaded-image.jsx-4fcffd91897b9e19{height:150px;width:130px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;border:1px solid var(--separator);-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover;background-repeat:no-repeat;background-position:center center;-webkit-transition:all.3s ease-in-out;-moz-transition:all.3s ease-in-out;-o-transition:all.3s ease-in-out;transition:all.3s ease-in-out;-webkit-box-shadow:0 0 10px 0 rgba(0,0,0,.2);-moz-box-shadow:0 0 10px 0 rgba(0,0,0,.2);box-shadow:0 0 10px 0 rgba(0,0,0,.2);cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:end;-webkit-align-items:end;-moz-box-align:end;-ms-flex-align:end;align-items:end;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.uploaded-image.jsx-4fcffd91897b9e19:hover{-webkit-transform:scale(1.03);-moz-transform:scale(1.03);-ms-transform:scale(1.03);-o-transform:scale(1.03);transform:scale(1.03)}.remove-asset-button.jsx-4fcffd91897b9e19{display:none;margin-bottom:8px;padding:4px 8px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;height:40px;font-size:14px;font-weight:400}.uploaded-image.jsx-4fcffd91897b9e19:hover .remove-asset-button.jsx-4fcffd91897b9e19{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}"})]})};return m?(0,n.jsxs)("div",{className:"d-flex assets-root",children:[m<=2?(0,n.jsx)("div",{className:"few-assets-list d-flex",children:r.map((e,t)=>(0,n.jsx)("div",{className:"mr-20",children:x(e,t)},t))}):(0,n.jsx)(k.RC,{modules:[S.Vx,S.Ze],spaceBetween:20,slidesPerView:"auto",style:{padding:"4px 4px"},loop:!1,navigation:{nextEl:".uploaded-assets-next-button",prevEl:".uploaded-assets-prev-button"},children:r.map((e,t)=>(0,n.jsx)(k.qr,{className:"uploaded-assets-slide",onClick:e=>{e.stopPropagation()},children:x(e,t)},t))}),m>2&&(0,n.jsxs)("div",{className:"",children:[(0,n.jsxs)("div",{className:"jsx-280a3b8b2ead048c arrow-root uploaded-assets-prev-button",children:[(0,n.jsx)("div",{className:"jsx-280a3b8b2ead048c  d-flex align-items-center justify-content-center",children:(0,n.jsx)(u.I,{type:"arrows/arrow-left-filled"})}),(0,n.jsx)(c(),{id:"280a3b8b2ead048c",children:".left-arrow.jsx-280a3b8b2ead048c{font-weight:600}.arrow-root.jsx-280a3b8b2ead048c{position:absolute;top:50%;-webkit-transform:translatey(-50%);-moz-transform:translatey(-50%);-ms-transform:translatey(-50%);-o-transform:translatey(-50%);transform:translatey(-50%);z-index:10;left:-20px;cursor:pointer}"})]}),(0,n.jsxs)("div",{className:"jsx-7116f77166e0af8e right-arrow-root uploaded-assets-next-button",children:[(0,n.jsx)("div",{className:"jsx-7116f77166e0af8e  d-flex align-items-center justify-content-center",children:(0,n.jsx)(u.I,{type:"arrows/arrow-right-filled"})}),(0,n.jsx)(c(),{id:"7116f77166e0af8e",children:".right-arrow.jsx-7116f77166e0af8e{font-weight:600}.right-arrow-root.jsx-7116f77166e0af8e{position:absolute;top:50%;-webkit-transform:translatey(-50%);-moz-transform:translatey(-50%);-ms-transform:translatey(-50%);-o-transform:translatey(-50%);transform:translatey(-50%);z-index:10;right:-20px;cursor:pointer}"})]})]})]}):null},D=e=>{let t=(0,i.A)().currentLanguage,{t:a}=(0,l.B)(t),[r,o]=(0,s.useState)(e.uploadedAssets),[c,d]=(0,s.useState)(!1),u=t=>{let a=[...r,...t];o(a),e.setUploadedAssets(a)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N,{multiple:!0,onFilesPick:u,accept:"image/jpeg, image/png, image/webp, image/tiff, image/heic, image/heif",children:(0,n.jsxs)("span",{children:["+ ",a("assets.add_images")]})}),(0,n.jsx)(C,{assets:r,handleRemoveAsset:t=>{o([...r.filter((e,a)=>a!==t)]),e.setUploadedAssets([...r.filter((e,a)=>a!==t)])},handleClick:()=>{d(!0)}}),(0,n.jsx)(w,{onUpload:e=>{u([...r,...e])}}),(0,n.jsx)(_.v,{isOpened:c,setOpened:d,assets:r})]})};var I=a(93768);let L=e=>{var t;let{data:a,onSelectSubItem:s}=e,l=(0,i.A)().currentLanguage,r=(0,I.y_)(l);return(0,n.jsx)("div",{className:"accordion accordion-general",style:{...null!==(t=e.style)&&void 0!==t?t:{}},children:a.map((e,t)=>{var a;return(0,n.jsxs)("div",{className:"accordion-item",children:[(0,n.jsx)("h2",{className:"accordion-header",id:e.id,children:(0,n.jsx)("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#".concat(e.collapsedId),"aria-expanded":0===t?"true":"false","aria-controls":e.collapsedId,children:e.title})}),(0,n.jsx)("div",{id:e.collapsedId,className:"accordion-collapse collapse","aria-labelledby":e.id,children:(0,n.jsxs)("div",{className:"accordion-body",children:[e.content,null===(a=e.items)||void 0===a?void 0:a.map((t,a)=>(0,n.jsxs)("div",{className:"accordion-sub-item",onClick:()=>null==s?void 0:s(e.id,t.id),children:[(0,n.jsx)("span",{children:t.title}),(0,n.jsx)("div",{className:"accordion-sub-item-icon d-flex align-items-center",children:(0,n.jsx)(u.I,{type:"rtl"===r?"arrows/arrow-left-filled":"arrows/arrow-right-filled"})})]},a))]})})]},t)})})};var E=a(15579);let P=e=>{let{categories:t,isOpened:a,close:s,handleSubmit:r}=e,o=(0,i.A)().currentLanguage,{t:m}=(0,l.B)(o),g=(e,t)=>(0,n.jsxs)("div",{className:"jsx-3ea21b5519bffda1 main-category-item-root d-flex align-items-center flex-col justify-content-center mb-1",children:[(0,n.jsx)("div",{className:"jsx-3ea21b5519bffda1  w-100 mr-1 ml-1",children:(0,n.jsx)("div",{className:"jsx-3ea21b5519bffda1  w-100 m-10 d-flex text-center align-items-center justify-content-between",children:(0,n.jsxs)("div",{className:"jsx-3ea21b5519bffda1 d-flex align-items-center gap-2",children:[(0,n.jsx)(E.E,{category:e,size:40}),(0,n.jsx)("span",{className:"jsx-3ea21b5519bffda1 mb-0 m-0",children:e.name[o]})]})})}),(0,n.jsx)(c(),{id:"3ea21b5519bffda1",children:".main-category-item-root.jsx-3ea21b5519bffda1{cursor:pointer;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}"})]},t),x=t.map((e,t)=>{var a;let s=null===(a=e.subcategories)||void 0===a?void 0:a.map(e=>({id:e.id,collapsedId:e.id+"collapsed",title:(0,n.jsx)("div",{className:"sub-category-item",children:e.name[o]})}));return{id:e.id,collapsedId:e.id+"collapsed",title:g(e,t),items:s||[]}}).flat();return(0,n.jsxs)(d.j,{open:a,onClose:s,styles:{modal:{height:"70vh",backgroundColor:"var(--background_2)"},overlay:{background:"rgba(0, 0, 0, 0.5)"}},classNames:{modal:"info-modal"},closeIcon:(0,n.jsx)(u.I,{type:"generic/close-filled"}),center:!0,children:[(0,n.jsxs)("div",{className:"jsx-72ce380881ffd0e d-flex align-items-center justify-content-between",children:[(0,n.jsx)("h4",{className:"jsx-72ce380881ffd0e m-0",children:m("create_auction.select_category")}),(0,n.jsx)("div",{className:"jsx-72ce380881ffd0e"})]}),(0,n.jsx)("div",{className:"jsx-72ce380881ffd0e mt-20 modal-body-content",children:(0,n.jsx)(L,{data:x,onSelectSubItem:r})}),(0,n.jsx)(c(),{id:"72ce380881ffd0e",children:".back-button.jsx-72ce380881ffd0e{cursor:pointer}.categories-list.jsx-72ce380881ffd0e{height:60vh;overflow-y:auto;padding-top:16px}.subcategories-list.jsx-72ce380881ffd0e{display:block;width:100%}.modal-body-content.jsx-72ce380881ffd0e{height:-webkit-calc(100% - 50px);height:-moz-calc(100% - 50px);height:calc(100% - 50px);overflow-y:auto;-webkit-overflow-scrolling:touch;-ms-touch-action:auto;-ms-touch-action:auto;touch-action:auto}"})]})},A=e=>{var t,a;let{categories:r,buttonRef:o,formIsValid:c,formSubmitTries:d,initialData:m,setCurrentCategory:x}=e,p=(0,i.A)().currentLanguage,{t:f}=(0,l.B)(p),[h,b]=(0,s.useState)(null!==(t=m.mainCategoryId)&&void 0!==t?t:null),[v,j]=(0,s.useState)(null!==(a=m.subCategoryId)&&void 0!==a?a:null),[y,w]=(0,s.useState)(!1),_=()=>{w(!y)},N=e=>{e.stopPropagation(),b(null),j(null),x(null,null)},k=e=>r.find(t=>t.id===e);return(0,n.jsxs)("div",{className:"mt-40",children:[(0,n.jsx)("div",{className:"d-flex flex-row justify-content-between align-items-center mb-10",children:(0,n.jsx)("label",{className:"mb-0 create-auction-label",children:f("create_auction.category")})}),(0,n.jsx)("div",{ref:o,className:"create-auction-category-trigger",onClick:_,children:h?(()=>{var e;if(!h||!v)return null;let t=k(h),a=null==t?void 0:null===(e=t.subcategories)||void 0===e?void 0:e.find(e=>e.id===v);return(0,n.jsxs)("div",{className:"d-flex align-items-center justify-content-between w-100",children:[(0,n.jsxs)("div",{className:"d-flex align-items-center gap-4",children:[(0,n.jsx)(E.E,{category:k(h),size:50}),(0,n.jsxs)("div",{className:"d-flex flex-column",children:[(0,n.jsx)("span",{className:"fw-bold primary-color",children:null==t?void 0:t.name[p]}),(0,n.jsx)("span",{className:"fw-light",children:null==a?void 0:a.name[p]})]})]}),(0,n.jsx)("div",{className:"clear-selected-category-button d-flex align-items-center",onClick:N,children:(0,n.jsx)(u.I,{type:"generic/close-filled"})})]})})():(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"select-category-generic-icon",children:(0,n.jsx)(u.I,{type:"generic/category"})}),(0,n.jsx)("span",{children:f("create_auction.select_category")})]})}),!c&&(!h||!v)&&!!d&&(0,n.jsx)("div",{className:"mt-10",children:(0,n.jsx)(g.W,{message:f("create_auction.category_required"),isError:!0},d)}),(0,n.jsx)(P,{categories:r,isOpened:y,close:_,handleSubmit:(e,t)=>{b(e),j(t),x(e,t),_()}})]})};var R=a(72772);let z=e=>{let{rootRef:t,formIsValid:a,formSubmitTries:r,initialCondition:o}=e,c=(0,i.A)().currentLanguage,{t:d}=(0,l.B)(c),[m,x]=(0,s.useState)(null!=o?o:null),p=t=>{x(t),e.onSelect(t)};return(0,n.jsxs)("div",{className:"mt-20",ref:t,children:[(0,n.jsx)("div",{className:"d-flex flex-row justify-content-between align-items-center mb-10",children:(0,n.jsx)("label",{className:"mb-0 create-auction-label",children:d("create_auction.condition")})}),(0,n.jsxs)("div",{className:"d-flex align-items-center justify-content-center gap-2",children:[(0,n.jsxs)("div",{className:"auction-condition-item ".concat(m===R.aj.newProduct?"selected-condition-item":""),onClick:()=>p(R.aj.newProduct),children:[(0,n.jsx)(u.I,{type:"auction/auction-new",size:40}),(0,n.jsx)("span",{children:d("create_auction.new")})]}),(0,n.jsxs)("div",{className:"auction-condition-item ".concat(m===R.aj.used?"selected-condition-item":""),onClick:()=>p(R.aj.used),children:[(0,n.jsx)(u.I,{type:"auction/auction-used",size:40}),(0,n.jsx)("span",{children:d("create_auction.used")})]})]}),!a&&null==m&&!!r&&(0,n.jsx)("div",{className:"mt-10",children:(0,n.jsx)(g.W,{message:d("info.condition_required"),isError:!0},r)})]})},O=e=>{let{rootRef:t,formIsValid:a,initialTitle:r,formSubmitTries:o}=e,c=(0,i.A)().currentLanguage,{t:d}=(0,l.B)(c),[u,m]=(0,s.useState)(null!=r?r:"");return(0,n.jsxs)("div",{className:"mt-40",ref:t,children:[(0,n.jsx)("div",{className:"d-flex flex-row justify-content-between align-items-center mb-10",children:(0,n.jsx)("label",{htmlFor:"title-section-input",className:"mb-0 create-auction-label",children:d("create_auction.title")})}),(0,n.jsx)("input",{name:"title-section-input",className:"create-auction-input create-auction-no-icon-input",type:"text",value:u,maxLength:70,onBlur:()=>{e.onChange(u)},onChange:e=>{m(e.target.value)},placeholder:d("create_auction.title")}),(0,n.jsx)("div",{className:"d-flex justify-content-end mt-1",children:(0,n.jsxs)("span",{className:"fw-light",children:[u.length,"/70"]})}),!a&&!u.length&&!!o&&(0,n.jsx)("div",{className:"mt-10",children:(0,n.jsx)(g.W,{message:d("create_auction.title_required"),isError:!0},o)})]})};var T=a(35658),F=a(90908);let B=e=>{var t,a;let o=(0,i.A)(),c=o.currentLanguage,{t:m}=(0,l.B)(c),[g,x]=(0,s.useState)(!1),{isOpened:p,close:f}=e,h=async()=>{var t;if(!g){if(((null===(t=v.t.accountData)||void 0===t?void 0:t.coins)||-1)<o.appSettings.auctionsCoinsCost){r.oR.error(m("coins_for_auction_or_bid.not_enough_for_auction"));return}x(!0),await e.handleSubmit(),x(!1),f()}},{freeAuctionsCount:b,auctionsCoinsCost:j}=o.appSettings;return(0,n.jsxs)(d.j,{open:p,onClose:f,styles:{modal:{maxWidth:"550px",backgroundColor:"var(--background_2)"},overlay:{background:"rgba(0, 0, 0, 0.5)"}},classNames:{modal:"info-modal"},closeIcon:(0,n.jsx)(u.I,{type:"generic/close-filled"}),center:!0,children:[(0,n.jsx)("h4",{className:"mb-20",children:m("create_auction.create_auction")}),(0,n.jsx)("p",{className:"m-0",children:m("coins_for_auction_or_bid.reached_max_auctions",{no:b})}),(0,n.jsx)("p",{children:m("coins_for_auction_or_bid.reached_max_auctions_1",{no:j})}),(0,n.jsx)("p",{children:m("coins_for_auction_or_bid.auction_get_back")}),(0,n.jsx)("p",{className:"m-0",children:m("coins_for_auction_or_bid.you_have_coins_no",{no:null!==(a=null===(t=v.t.accountData)||void 0===t?void 0:t.coins)&&void 0!==a?a:0})}),(0,n.jsxs)("div",{className:"d-flex align-items-center justify-content-between mt-40",children:[(0,n.jsx)("button",{onClick:f,"aria-label":m("generic.cancel"),children:m("generic.cancel")}),(0,n.jsx)("button",{className:"btn fill-btn",onClick:h,"aria-label":m("generic.done"),children:g?(0,n.jsx)("div",{className:"loader-wrapper",children:(0,n.jsx)(u.I,{type:"loading",size:40})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.I,{type:"generic/coin"}),(0,n.jsxs)("span",{className:"ml-5",children:[" ",m("create_auction.create_auction")]})]})})]})]})};var G=a(22970);let U=e=>{let{initialStartDate:t,initialEndDate:a,forUpdateAuction:r=!1}=e,o=(0,i.A)().currentLanguage,{t:d}=(0,l.B)(o),u=new Date;u.setDate(u.getDate()+1);let m=new Date(u);m.setDate(m.getDate()+3);let[g,x]=(0,s.useState)(!!t),[p,f]=(0,s.useState)(null!=t?t:u),[h,b]=(0,s.useState)(null!=a?a:m),v=new Date;v.setMonth(v.getMonth()+1);let j=new Date(p);j.setDate(j.getDate()+1);let[y,w]=(0,s.useState)(j),_=new Date(h);_.setDate(_.getDate()+30);let[N,k]=(0,s.useState)(_),S=(0,s.useRef)(!1),C=()=>{r||x(!g)};(0,s.useEffect)(()=>{S.current&&e.onSelect(g,p,h),S.current=!0},[p,h,g]);let D=e=>{f(e);let t=h.getTime()-e.getTime();if(e>h||t/864e5>25){let t=new Date(e);t.setDate(t.getDate()+3);let a=new Date(e);a.setDate(a.getDate()+1);let n=new Date(t);n.setMonth(n.getMonth()+1),w(a),b(t),k(n)}},I=e=>{b(e)};return(0,n.jsxs)("div",{className:c().dynamic([["a0bb1b9ca1272fc0",[g?"1px solid var(--font_1)":"none"]]])+" mt-40 auction-start-end-date-root",children:[(0,n.jsxs)("div",{onClick:C,className:c().dynamic([["a0bb1b9ca1272fc0",[g?"1px solid var(--font_1)":"none"]]])+" d-flex flex-row justify-content-between align-items-center mb-10",children:[(0,n.jsx)("label",{className:c().dynamic([["a0bb1b9ca1272fc0",[g?"1px solid var(--font_1)":"none"]]])+" mb-0 create-auction-label",children:d("starting_soon_auctions.custom_start_date")}),!r&&(0,n.jsx)("div",{className:c().dynamic([["a0bb1b9ca1272fc0",[g?"1px solid var(--font_1)":"none"]]])+" checkbox-container",children:(0,n.jsx)("input",{type:"checkbox",onChange:C,checked:g,className:c().dynamic([["a0bb1b9ca1272fc0",[g?"1px solid var(--font_1)":"none"]]])})})]}),g&&(0,n.jsxs)("div",{className:c().dynamic([["a0bb1b9ca1272fc0",[g?"1px solid var(--font_1)":"none"]]])+" d-flex align-items-center justify-content-center gap-2 mb-10",children:[(0,n.jsxs)("div",{className:c().dynamic([["a0bb1b9ca1272fc0",[g?"1px solid var(--font_1)":"none"]]])+" d-flex flex-column align-items-start w-100 flex-grow-1",children:[(0,n.jsx)("span",{className:c().dynamic([["a0bb1b9ca1272fc0",[g?"1px solid var(--font_1)":"none"]]])+" secondary-color",children:d("starting_soon_auctions.start_date")}),(0,n.jsx)(G.A,{locale:o,className:"auction-date-picker",onChange:e=>{D(e)},minDate:u,maxDate:v,value:p,clearIcon:null,calendarIcon:null})]}),(0,n.jsxs)("div",{className:c().dynamic([["a0bb1b9ca1272fc0",[g?"1px solid var(--font_1)":"none"]]])+" d-flex flex-column align-items-start w-100 flex-grow-1",children:[(0,n.jsx)("span",{className:c().dynamic([["a0bb1b9ca1272fc0",[g?"1px solid var(--font_1)":"none"]]])+" secondary-color",children:d("starting_soon_auctions.end_date")}),(0,n.jsx)(G.A,{locale:o,className:"auction-date-picker",onChange:e=>{I(e)},value:h,minDate:y,maxDate:N,clearIcon:null,calendarIcon:null})]})]}),(0,n.jsx)("span",{className:c().dynamic([["a0bb1b9ca1272fc0",[g?"1px solid var(--font_1)":"none"]]])+" secondary-color",children:d(r?"starting_soon_auctions.opted_for_custom":"starting_soon_auctions.will_automaticaly_start")}),(0,n.jsx)(c(),{id:"a0bb1b9ca1272fc0",dynamic:[g?"1px solid var(--font_1)":"none"],children:".auction-start-end-date-root.__jsx-style-dynamic-selector{padding-bottom:8px;border-bottom:".concat(g?"1px solid var(--font_1)":"none","}")})]})},q=e=>{let{initialLink:t}=e,a=(0,i.A)().currentLanguage,{t:r}=(0,l.B)(a),[o,c]=(0,s.useState)(null!=t?t:"");return(0,n.jsxs)("div",{className:"mt-10",children:[(0,n.jsx)("div",{className:"d-flex flex-row justify-content-between align-items-center mb-10",children:(0,n.jsxs)("label",{htmlFor:"title-section-input",className:"mb-0 create-auction-label",children:[r("create_auction.youtube_link"),(0,n.jsxs)("span",{className:"fw-light",children:[" ",r("generic.optional")]})]})}),(0,n.jsx)("input",{name:"title-section-input",className:"create-auction-input create-auction-no-icon-input",type:"text",value:o,maxLength:70,onBlur:()=>{e.onChange(o)},onChange:e=>{c(e.target.value)},placeholder:r("create_auction.enter_youtube_link")})]})};var V=a(96404),H=a(76646),W=a(79690),J=a(67177),M=a(9323),Z=a(86237);class Y{async generateDescription(e){try{let t=await this.generateFormData(e),a=await Z.w.makeRequest({method:Z.Y.POST,path:"".concat(this.basePath,"/generate-from-images"),payload:t,contentType:"multipart/form-data"});return{title:a.title,description:a.description,category:a.category,price:a.price}}catch(e){return this.handleError(e),console.error("Error generating description:",e),null}}async generateFormData(e){let t=new FormData;return Object.keys(e).forEach(a=>{"files"===a?e[a].forEach(e=>{t.append("files",e)}):t.set(a,"string"==typeof e[a]?e[a]:JSON.stringify(e[a]))}),t}handleError(e){let t=JSON.stringify(e);return t.includes("TOO_MANY")?{error:!0,message:M.b.TOO_MANY_ASSETS}:t.includes("ASSET_TOO_BIG")?{error:!0,message:M.b.ASSET_TOO_BIG}:t.includes("ASSET_NOT_SUPPORTED")?{error:!0,message:M.b.ASSET_NOT_SUPPORTED}:{error:!0,message:"Could not create or update auction"}}constructor(){this.basePath="/ai"}}let X=new Y;class K{async generateAuctionDataFromImages(e){var t,a,n,s;let{appSettings:i,assets:l,currency:r}=e;if(!i.aiEnabled)throw Error("AI_DISABLED");let o=null!==(n=null===(t=v.t.accountData)||void 0===t?void 0:t.aiResponsesCount)&&void 0!==n?n:0;if(i.maxAiResponsesPerUser<=o)throw Error("MAX_AI_RESPONSES_REACHED");if((o<i.freeAiResponses?0:i.aiResponsesPriceInCoins)>(null!==(s=null===(a=v.t.accountData)||void 0===a?void 0:a.coins)&&void 0!==s?s:0))throw Error("NOT_ENOUGH_COINS");let c=await Promise.all(l.map(async e=>(0,J.C)(e)));return await X.generateDescription({files:c,currency:r})}}let Q=new K,$=e=>{var t,a;let{currentLanguage:o,appSettings:c}=(0,i.A)(),{t:d}=(0,l.B)(o),{assets:m}=e,[g,x]=(0,s.useState)(!1),[p,f]=(0,s.useState)(!1),h=(0,V.G)(),b=async()=>{if(g)return;let t=!c.allowAiResponsesOnUnvalidatedEmails,a=await H.u.userHasEmailVerified(c);if(t&&!a){f(!0);return}x(!0);try{var n;let t=await Q.generateAuctionDataFromImages({appSettings:c,assets:m,currency:null!==(n=null==h?void 0:h.name.en)&&void 0!==n?n:"USD"});if(!t){r.oR.error(d("ai.generate_error"));return}e.onGenerated(t)}catch(e){if("NOT_ENOUGH_COINS"===e.message){r.oR.error(d("ai.not_enough_coins"));return}if("AI_DISABLED"===e.message){r.oR.error(d("ai.ai_disabled"));return}if("MAX_AI_RESPONSES_REACHED"===e.message){r.oR.error(d("ai.max_ai_responses_reached"));return}r.oR.error(d("ai.generate_error"))}finally{x(!1)}};if(0===m.length)return null;let j=(null!==(a=null===(t=v.t.accountData)||void 0===t?void 0:t.aiResponsesCount)&&void 0!==a?a:0)<c.freeAiResponses?0:c.aiResponsesPriceInCoins;return(0,n.jsxs)("div",{style:{padding:"1px",background:"linear-gradient(90deg, \n      #F45C43,\n      #DC4973,\n      #AB4F8F,\n      #5438DC,\n      #357DED,\n      #008072\n    )",borderRadius:"6px"},children:[(0,n.jsxs)("div",{style:{background:"var(--background_1)",padding:"16px",borderRadius:"6px"},className:"d-flex flex-column gap-3",children:[(0,n.jsxs)("div",{className:"d-flex gap-3 align-items-start",children:[(0,n.jsx)(u.I,{type:"generic/ai",size:24}),(0,n.jsxs)("span",{children:[" ",d("ai.generate_description")]})]}),(0,n.jsx)("button",{className:"btn btn-gradient d-flex align-items-center justify-content-center",onClick:b,style:{minHeight:46,border:"none"},children:g?(0,n.jsx)("div",{className:"loader-wrapper d-flex justify-content-center",children:(0,n.jsx)(u.I,{type:"loading",color:"white",size:32})}):(0,n.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,n.jsx)("span",{children:d("ai.generate")}),j>0&&(0,n.jsxs)("span",{className:"ml-10 d-flex align-items-center",children:["(",(0,n.jsx)(u.I,{type:"generic/coin"}),(0,n.jsxs)("span",{className:"ml-5",children:[d("buy_coins.coins_no",{no:j}),")"]})]})]})})]}),(0,n.jsx)(W.$,{isOpened:p,close:()=>f(!1),onValidated:b})]})},ee=(0,F.PA)(e=>{var t,a,o,c,d,m,g,x,h,w,_,N,k,S;let C=e.auction?R.e7.fromJSON(e.auction):null,I=(0,i.A)(),L=I.currentLanguage,{t:E}=(0,l.B)(L),{freeAuctionsCount:P,auctionsCoinsCost:F}=I.appSettings,G=I.appCategories,H=(0,f.useRouter)(),[W,J]=(0,s.useState)(0),[M,Z]=(0,s.useState)(null!==(a=null==C?void 0:C.title)&&void 0!==a?a:""),[Y,X]=(0,s.useState)(null!==(o=null==C?void 0:C.youtubeLink)&&void 0!==o?o:""),[K,Q]=(0,s.useState)(null!==(c=null==C?void 0:C.startingPrice)&&void 0!==c?c:null),[ee,et]=(0,s.useState)(null!==(d=null==C?void 0:C.hasCustomStartingPrice)&&void 0!==d&&d),[ea,en]=(0,s.useState)(null!==(m=null==C?void 0:C.mainCategoryId)&&void 0!==m?m:null),[es,ei]=(0,s.useState)(null!==(g=null==C?void 0:C.subCategoryId)&&void 0!==g?g:null),[el,er]=(0,s.useState)(null!==(x=null==C?void 0:C.condition)&&void 0!==x?x:null),[eo,ec]=(0,s.useState)(null!==(h=null==C?void 0:C.assets)&&void 0!==h?h:[]),[ed,eu]=(0,s.useState)(null!==(w=null==C?void 0:C.description)&&void 0!==w?w:""),[em,eg]=(0,s.useState)(null),[ex,ep]=(0,s.useState)(!1),[ef,eh]=(0,s.useState)(!0),[eb,ev]=(0,s.useState)(0),[ej,ey]=(0,s.useState)(!1),ew=(0,V.G)(),[e_,eN]=(0,s.useState)({startDate:null!==(_=null==C?void 0:C.startAt)&&void 0!==_?_:null,endDate:null!==(N=null==C?void 0:C.expiresAt)&&void 0!==N?N:null,useCustomDate:!!(null==C?void 0:C.startAt)}),ek=(0,s.useRef)(null),eS=(0,s.useRef)(null),eC=(0,s.useRef)(null),eD=(0,s.useRef)(null),eI=(0,s.useRef)(null),eL=(0,s.useRef)(!1);(0,s.useEffect)(()=>{if(!em){eh(!1);return}eh(!0)},[em]),(0,s.useEffect)(()=>{!C||em||eL.current||(async()=>{eL.current=!0;let e=await eE(C.location);e&&eg(e),eL.current=!1})()},[C,em]);let eE=async e=>await b.Z.getPlaceDetailsFromLatLng(e.lat,e.lng)||null,eP=async t=>{var a,n,s,i,l;if(!ex&&(t.preventDefault(),t.stopPropagation(),ev(eb+1),!ex)){if(!(null==M?void 0:M.trim().length)){null===(n=ek.current)||void 0===n||n.scrollIntoView({behavior:"smooth",block:"center"});return}if(!ea||!es){null===(s=eC.current)||void 0===s||s.scrollIntoView({behavior:"smooth",block:"center"});return}if(!em){null===(i=eS.current)||void 0===i||i.scrollIntoView({behavior:"smooth",block:"center"});return}if(null===el){null===(l=eD.current)||void 0===l||l.scrollIntoView({behavior:"smooth",block:"center"});return}if(P<=v.t.accountStats.allAuctionsCount&&!(null===(a=e.auction)||void 0===a?void 0:a.id)){ey(!0);return}eA()}},eA=async()=>{var e,t,a;ep(!0);let{lat:n,lng:s}=null===(e=em.geometry)||void 0===e?void 0:e.location,i=Array.from(new Set(eo.filter(e=>!!(null==e?void 0:e.id)).map(e=>e.id))),l={assets:eo.filter(e=>!(null==e?void 0:e.id)),latLng:{lat:n,lng:s},startingPrice:null!=K?K:void 0,hasCustomStartingPrice:ee,youtubeLink:Y,initialCurrencyId:null==ew?void 0:ew.id,location:(0,y.xB)(em),description:ed,title:M,mainCategoryId:ea,subCategoryId:es,condition:el,startAt:e_.useCustomDate&&null!==(t=e_.startDate)&&void 0!==t?t:void 0,expiresAt:e_.useCustomDate&&null!==(a=e_.endDate)&&void 0!==a?a:void 0},o=C?await T.z.update(C.id,{...l,assetsToKeep:i}):await T.z.create(l);if(!o){r.oR.error(E("create_auction.repository.could_not_create")),ep(!1);return}if((null==C?void 0:C.id)&&r.oR.success(E("auction_details.update.update_successful")),ep(!1),C){H.push("/auction/".concat(C.id)),H.refresh();return}"boolean"!=typeof o&&H.push("/auction/".concat(o.id))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D,{uploadedAssets:eo,setUploadedAssets:e=>{ec([...e])}}),(null==C?void 0:C.id)?null:(0,n.jsx)($,{assets:eo,onGenerated:e=>{e.title&&Z(e.title),e.description&&eu(e.description),e.category&&G.forEach(t=>{var a;let n=(null!==(a=t.subcategories)&&void 0!==a?a:[]).find(t=>{var a,n;return(null===(n=t.name)||void 0===n?void 0:null===(a=n.en)||void 0===a?void 0:a.toLowerCase())===e.category.toLowerCase()});n&&(en(t.id),ei(n.id))}),e.price&&(Q(e.price),et(!0)),J(W+1)}}),(0,n.jsxs)("form",{className:"mt-20",onSubmit:eP,children:[(0,n.jsx)(O,{rootRef:ek,initialTitle:M,formIsValid:ef,formSubmitTries:eb,onChange:e=>Z(e)},"title-"+W.toString()),(0,n.jsx)(q,{initialLink:Y,onChange:e=>X(e)}),(0,n.jsx)(A,{categories:G,initialData:{mainCategoryId:ea,subCategoryId:es},buttonRef:eC,formIsValid:ef,formSubmitTries:eb,setCurrentCategory:(e,t)=>{en(e),ei(t)}},"category-"+W.toString()),(0,n.jsx)(j,{initialLocation:em,formIsValid:ef,formSubmitTries:eb,inputRef:eS,useLocationDetection:!C,setLocation:eg}),(0,n.jsx)(z,{rootRef:eD,formIsValid:ef,initialCondition:null!=el?el:void 0,formSubmitTries:eb,onSelect:er}),(0,n.jsx)(p,{rootRef:eI,formIsValid:ef,isCustomPriceSelected:ee,formSubmitTries:eb,selectedPrice:K,initialCurrencyId:C?C.initialCurrencyId:void 0,setPrice:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Q(e),et(t)}},"price-"+W.toString()),!C||(null==C?void 0:C.startAt)?(0,n.jsx)(U,{initialStartDate:null!==(k=e_.startDate)&&void 0!==k?k:void 0,initialEndDate:null!==(S=e_.endDate)&&void 0!==S?S:void 0,forUpdateAuction:!!C,onSelect:(e,t,a)=>{eN({startDate:null!=t?t:null,endDate:null!=a?a:null,useCustomDate:e})}}):null,(0,n.jsxs)("div",{className:"mt-40",children:[(0,n.jsxs)("label",{htmlFor:"description",className:"create-auction-label mb-10",children:[E("create_auction.description")," ",(0,n.jsxs)("span",{className:"fw-light",children:[" ",E("generic.optional")]})]}),(0,n.jsx)("textarea",{name:"description",className:"custom-textarea",id:"description",value:ed,maxLength:1e3,onChange:e=>eu(e.target.value),placeholder:E("create_auction.enter_description")}),(0,n.jsx)("div",{className:"d-flex justify-content-end mt-1",children:(0,n.jsxs)("span",{className:"fw-light",children:[ed.length,"/1000"]})})]}),(0,n.jsx)("button",{className:"fill-btn w-100 mb-40 mt-20",type:"submit",disabled:ex,children:ex?(0,n.jsx)("div",{className:"loader-wrapper d-flex justify-content-center",children:(0,n.jsx)(u.I,{type:"loading",color:"white",size:40})}):(null==C?void 0:C.id)?E("auction_details.update.title"):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:E("create_auction.create_auction")}),P<=v.t.accountStats.allAuctionsCount&&!(null===(t=e.auction)||void 0===t?void 0:t.id)&&(0,n.jsxs)("span",{className:"ml-10 d-flex align-items-center",children:["(",(0,n.jsx)(u.I,{type:"generic/coin"}),(0,n.jsxs)("span",{className:"ml-5",children:[E("buy_coins.coins_no",{no:F}),")"]})]})]})})]}),(0,n.jsx)(B,{isOpened:ej,close:()=>ey(!1),handleSubmit:eA})]})})},82722:(e,t,a)=>{a.d(t,{H:()=>x});var n=a(95155),s=a(28144),i=a(13572),l=a(18152),r=a(70291),o=a(99512),c=a(70719),d=a.n(c),u=a(12115);let m=e=>{let t=(0,o.A)().currentLanguage,{t:a}=(0,s.B)(t),{predictions:l,queryLength:r,isLoading:c,handleLocationPick:d}=e;return(0,n.jsxs)("div",{className:"locations-search-menu-root",children:[c&&(0,n.jsx)("div",{className:"loader-wrapper d-flex justify-content-center",children:(0,n.jsx)(i.I,{type:"loading",size:40})}),!c&&r<2&&!l.length&&(0,n.jsx)("div",{className:"pl-20 pr-20",children:a("info.add_more_to_search")}),c||!(r>=3)||l.length?l.map((e,t)=>(0,n.jsx)("div",{className:"location-search-item",onClick:()=>d(e),children:(0,n.jsxs)("span",{className:"ml-10",children:[" ",e.description]})},t)):(0,n.jsx)("div",{className:"pl-20 pr-20",children:a("info.no_locations_found")})]})};var g=a(88860);let x=e=>{var t;let a=(0,o.A)().currentLanguage,{t:c}=(0,s.B)(a),[x,p]=(0,u.useState)(!1),[f,h]=(0,u.useState)(""),[b,v]=(0,u.useState)(null!==(t=e.searchInProgress)&&void 0!==t&&t),[j,y]=(0,u.useState)([]),w=u.useRef(null),_=u.useRef(null);(0,u.useEffect)(()=>{var t;v(null!==(t=e.searchInProgress)&&void 0!==t&&t)},[e.searchInProgress]),(0,u.useEffect)(()=>{var t;if(!e.selectedLocation)return;let a=null===(t=e.selectedLocation.address_components)||void 0===t?void 0:t.find(e=>e.types.includes("country")),n=(0,g.LL)(e.selectedLocation);a&&n&&h("".concat(n,", ").concat(a.long_name))},[e.selectedLocation]),(0,r.L)(w,()=>{x&&p(!1)},[x],[_]);let N=async e=>{if(e.length<2)return;v(!0),y([]);let t=await l.Z.searchGooglePlaces(e);v(!1),y(t)},k=(0,u.useRef)(d()(N,500)),S=(0,u.useCallback)(e=>{let t=e.target.value;h(t),k.current(t)},[]),C=t=>{e.onLocationPicked(t),h(t?t.description:""),p(!1)};return(0,n.jsxs)("div",{className:"pos-rel w-100 ".concat(x?"show-element":""),children:[(0,n.jsx)("div",{className:"search-icon-root",children:(0,n.jsx)(i.I,{type:"generic/location"})}),(0,n.jsx)("input",{className:"m-0 create-auction-input ".concat(e.secondaryColor?"secondary-background-color":""),type:"text",value:f,onChange:S,placeholder:c("location.search_by_city"),ref:_,onFocus:()=>p(!0),style:e.customStyle}),b&&(0,n.jsx)("div",{className:"right-icon-root",children:(0,n.jsx)(i.I,{type:"loading",size:24})}),!b&&f.length>0&&(0,n.jsx)("div",{className:"right-icon-root",onClick:()=>{C(null)},children:(0,n.jsx)(i.I,{type:"generic/close-filled",size:24})}),(0,n.jsx)("div",{className:"global-search-menu",ref:w,children:(0,n.jsx)(m,{predictions:j,queryLength:f.length,isLoading:b,handleLocationPick:C})})]})}},15579:(e,t,a)=>{a.d(t,{E:()=>l});var n=a(95155),s=a(5565),i=a(13572);let l=e=>{let{category:t,size:a=24}=e;return t?t.asset?(0,n.jsx)(s.default,{alt:"Category image",src:"".concat("http://localhost:7777","/").concat(t.asset.path),height:a,width:a}):t.remoteIconUrl?(0,n.jsx)(s.default,{alt:"Category image",src:t.remoteIconUrl,height:a,width:a}):t.icon?(0,n.jsx)(i.I,{type:"categories/".concat(t.icon),size:a}):null:null}},18152:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(86237),s=a(64984);class i{async load(){try{return(await n.w.makeRequest({path:"".concat(this.basePath)})).data.map(e=>s.aZ.fromJSON({...e}))}catch(e){throw Error("Could not load locations: ".concat(e))}}async searchGooglePlaces(e){try{var t;let a=await n.w.makeRequest({path:"/google-maps/search/".concat(e),method:n.Y.GET});return null==a?void 0:null===(t=a.predictions)||void 0===t?void 0:t.map(e=>new s.TQ({...e}))}catch(e){throw Error("Could not search google places: ".concat(e))}}async getGooglePlaceDetails(e){try{var t;let a=await n.w.makeRequest({path:"/google-maps/details/".concat(e),method:n.Y.GET});return new s.Jy({...null!==(t=null==a?void 0:a.result)&&void 0!==t?t:{}})}catch(e){throw Error("Could not get google place details: ".concat(e))}}async getPlaceDetailsFromLatLng(e,t){try{let a=await n.w.makeRequest({path:"/google-maps/location/".concat(e,"/").concat(t),method:n.Y.GET});return new s.Jy({...a})}catch(e){throw Error("Could not get google place details by location: ".concat(e))}}constructor(){this.basePath="/locations"}}let l=new i;class r{searchGooglePlaces(e){return l.searchGooglePlaces(e)}getGooglePlaceDetails(e){return l.getGooglePlaceDetails(e)}locationIsInRomania(e){var t;return null===(t=e.address_components)||void 0===t?void 0:t.some(e=>e.types.includes("country")&&"RO"===e.short_name)}getPlaceDetailsFromLatLng(e,t){return l.getPlaceDetailsFromLatLng(e,t)}constructor(){this.getLocationFromCurrentDevice=()=>{let e={enableHighAccuracy:!1,timeout:5e3,maximumAge:0};return new Promise(async(t,a)=>{if(!navigator.geolocation)return t(null);let n=e=>{a(e)},s=async e=>{try{let a=await l.getPlaceDetailsFromLatLng(e.coords.latitude,e.coords.longitude);t(a)}catch(e){console.error("Could not get place details from lat lng: ".concat(e)),t(null)}};try{let t=await navigator.permissions.query({name:"geolocation"});"granted"===t.state?navigator.geolocation.getCurrentPosition(s,n,e):"prompt"===t.state?navigator.geolocation.getCurrentPosition(s,n,e):"denied"===t.state&&a("denied"),"denied"===t.state&&a("denied")}catch(e){return a(e)}})}}}let o=new r}}]);