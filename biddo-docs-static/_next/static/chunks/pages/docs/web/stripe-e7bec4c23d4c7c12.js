(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8891],{7269:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/web/stripe",function(){return i(3844)}])},3844:function(e,t,i){"use strict";i.r(t),i.d(t,{useTOC:function(){return c}});var n=i(5893),r=i(7812),s=i(2838),o=i(8925),a=i(5675),d=i.n(a),l=i(9378);i(1314);var h=i(5192);function c(e){return[{value:"Stripe Integration",id:"stripe-integration",depth:2},{value:"Step 1: Create a Stripe Account",id:"step-1-create-a-stripe-account",depth:3},{value:"Step 2: Create products",id:"step-2-create-products",depth:3},{value:"Step 3: Integrate inside the NodeJS server",id:"step-3-integrate-inside-the-nodejs-server",depth:3},{value:"Step 4: Integrate inside the Web Application",id:"step-4-integrate-inside-the-web-application",depth:3},{value:"Step 5: Add Stripe Webhook",id:"step-5-add-stripe-webhook",depth:3},{value:"Step 6: Test the integration",id:"step-6-test-the-integration",depth:3}]}t.default=(0,r.c)(function(e){let{toc:t=c(e)}=e,i={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.h2,{id:t[0].id,children:t[0].value}),"\n",(0,n.jsx)(i.h3,{id:t[1].id,children:t[1].value}),"\n",(0,n.jsxs)(i.p,{children:["If you don’t already have a Stripe account, you can create one ",(0,n.jsx)(i.a,{href:"https://dashboard.stripe.com/register",children:"here"}),"."]}),"\n",(0,n.jsx)(i.p,{children:"After you have created the account, you will be redirected to the dashboard."}),"\n",(0,n.jsx)(i.p,{children:"You are going to be asked to complete your business profile, in order to be able to receive payments, but you can skip this step if you only want to test how the implementation works."}),"\n",(0,n.jsx)(i.h3,{id:t[2].id,children:t[2].value}),"\n",(0,n.jsxs)(i.p,{children:["In order to create products, you need to go to the ",(0,n.jsx)(i.code,{children:"Product catalog"})," section in the Stripe dashboard."]}),"\n",(0,n.jsx)(i.p,{children:"You will be able to see a “Create product” button, that will allow you to create a new product."}),"\n",(0,n.jsx)(i.p,{children:"We will create 3 products, that will represent the amount of coins that the user can buy in the application:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"50 coins"}),"\n",(0,n.jsx)(i.li,{children:"200 coins"}),"\n",(0,n.jsx)(i.li,{children:"500 coins"}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Make sure that the products have the “One-off” payment type. You can set any price you want for the products."}),"\n",(0,n.jsx)(i.p,{children:"In a visual way, this is how the process should look like:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Stripe dashboard with no products inside the product catalog"}),"\n"]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(l.Z,{children:(0,n.jsx)(d(),{src:"/web/stripe/1.png",alt:"Buckets",width:1500,height:1500})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Click on the “Create product” button and add a product details"}),"\n"]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(l.Z,{children:(0,n.jsx)(d(),{src:"/web/stripe/2.png",alt:"Buckets",width:1500,height:1500})}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"After you have created the products, you should see them in the product catalog"}),"\n"]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(l.Z,{children:(0,n.jsx)(d(),{src:"/web/stripe/3.png",alt:"Buckets",width:1500,height:1500})}),"\n",(0,n.jsx)(i.h3,{id:t[3].id,children:t[3].value}),"\n",(0,n.jsxs)(i.p,{children:["After we have the products created, we need to get the Stripe secrey key and the product keys and add them inside the ",(0,n.jsx)(i.code,{children:".env"})," file in the NodeJS server."]}),"\n",(0,n.jsx)(i.p,{children:"You can find the secret key in the Stripe dashboard, in the Developers section. (Developers -> API keys from the header)\nThe product keys can be found in the product details, in the Stripe dashboard."}),"\n",(0,n.jsx)(i.p,{children:"Let’s see how it should look like:"}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsx)(i.li,{children:"Find the secret key"}),"\n"]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(l.Z,{children:(0,n.jsx)(d(),{src:"/web/stripe/4.png",alt:"Buckets",width:1500,height:1500})}),"\n",(0,n.jsx)(i.p,{children:"You will be redirected to the API keys section, where you can find the secret key."}),"\n",(0,n.jsxs)(i.ol,{start:"2",children:["\n",(0,n.jsx)(i.li,{children:"Find the product keys"}),"\n"]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(l.Z,{children:(0,n.jsx)(d(),{src:"/web/stripe/5.png",alt:"Buckets",width:1500,height:1500})}),"\n",(0,n.jsx)(i.p,{children:"Make sure that you have the product ids from all the products that you have created."}),"\n",(0,n.jsxs)(i.p,{children:["After you have the keys, you need to add them inside the ",(0,n.jsx)(i.code,{children:".env"})," file in the NodeJS server."]}),"\n",(0,n.jsx)(i.pre,{icon:h.Fx,tabIndex:"0","data-language":"bash","data-word-wrap":"",children:(0,n.jsxs)(i.code,{children:[(0,n.jsxs)(i.span,{children:[(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"STRIPE_SECRET_KEY"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"sk_test_51JG"})]}),"\n",(0,n.jsxs)(i.span,{children:[(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"STRIPE_PRODUCT_50_COINS"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"price_1JG"})]}),"\n",(0,n.jsxs)(i.span,{children:[(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"STRIPE_PRODUCT_200_COINS"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"price_1JG"})]}),"\n",(0,n.jsxs)(i.span,{children:[(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"STRIPE_PRODUCT_500_COINS"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"price_1JG"})]})]})}),"\n",(0,n.jsx)(i.h3,{id:t[4].id,children:t[4].value}),"\n",(0,n.jsxs)(i.p,{children:["Inside the Web Application, you need to add the Stripe public key inside the ",(0,n.jsx)(i.code,{children:".env"})," file."]}),"\n",(0,n.jsx)(i.p,{children:"You can find the public key in the Stripe dashboard, in the Developers section. (Developers -> API keys from the header)."}),"\n",(0,n.jsx)(i.p,{children:"It should be above the secret key (Publishable key)."}),"\n",(0,n.jsxs)(i.p,{children:["Add this inside the ",(0,n.jsx)(i.code,{children:".env"})," file in the root of the Web Application:"]}),"\n",(0,n.jsx)(i.pre,{icon:h.Fx,tabIndex:"0","data-language":"bash","data-word-wrap":"",children:(0,n.jsx)(i.code,{children:(0,n.jsxs)(i.span,{children:[(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"NEXT_PUBLIC_STRIPE_PUBLIC_KEY"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"pk_test_51JG"})]})})}),"\n",(0,n.jsx)(i.h3,{id:t[5].id,children:t[5].value}),"\n",(0,n.jsx)(i.p,{children:"In order to receive the payment status, you need to add a webhook inside the Stripe dashboard. This webhook will send a POST request to the server every time a payment is made."}),"\n",(0,n.jsx)(i.p,{children:"You can add a webhook by going to the Developers section in the Stripe dashboard and clicking on the “Webhooks” section."}),"\n",(0,n.jsx)(i.p,{children:"You will be able to see a “Add endpoint” button, that will allow you to add a new webhook."}),"\n",(0,n.jsxs)(i.p,{children:["You need to add the URL of the server, followed by ",(0,n.jsx)(i.code,{children:"/payment/stripe-webhook"}),"."]}),"\n",(0,n.jsxs)(i.p,{children:["For example, if the server is running on ",(0,n.jsx)(i.code,{children:"http://localhost:7777"}),", the webhook URL should be ",(0,n.jsx)(i.code,{children:"http://localhost:7777/payment/stripe-webhook"}),"."]}),"\n",(0,n.jsx)(i.p,{children:"The problem when using localhost is that Stripe will not be able to send the POST request to the server, because it is running on your local machine."}),"\n",(0,n.jsxs)(i.p,{children:["One option is to use a service like ",(0,n.jsx)(i.a,{href:"https://ngrok.com/",children:"ngrok"})," to create a tunnel to your local machine."]}),"\n",(0,n.jsxs)(i.p,{children:["The official option of testing the webhook is using the Stripe CLI. You can find more information about this ",(0,n.jsx)(i.a,{href:"https://docs.stripe.com/webhooks",children:"here"}),"."]}),"\n",(0,n.jsx)(i.p,{children:"For demo purposes, I will be using ngrok to create a tunnel to my local machine. This will provide me with a public URL that I can use to test the webhook."}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsx)(i.li,{children:"Create a new webhook"}),"\n"]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(l.Z,{children:(0,n.jsx)(d(),{src:"/web/stripe/6.png",alt:"Buckets",width:1500,height:1500})}),"\n",(0,n.jsxs)(i.ol,{start:"2",children:["\n",(0,n.jsx)(i.li,{children:"Choose what events to be send through the webhook. The NodeJS server only handles the “checkout.session.completed” event, so you can select only this event."}),"\n"]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(l.Z,{children:(0,n.jsx)(d(),{src:"/web/stripe/7.png",alt:"Buckets",width:1500,height:1500})}),"\n",(0,n.jsxs)(i.ol,{start:"3",children:["\n",(0,n.jsxs)(i.li,{children:["After the webhook is created, you need to add the “Signing secret” of this webhook inside the ",(0,n.jsx)(i.code,{children:".env"})," file in the NodeJS server."]}),"\n"]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(l.Z,{children:(0,n.jsx)(d(),{src:"/web/stripe/8.png",alt:"Buckets",width:1500,height:1500})}),"\n",(0,n.jsxs)(i.p,{children:["This is what you need to add inside the ",(0,n.jsx)(i.code,{children:".env"})," file in the NodeJS server:"]}),"\n",(0,n.jsx)(i.pre,{icon:h.Fx,tabIndex:"0","data-language":"bash","data-word-wrap":"",children:(0,n.jsx)(i.code,{children:(0,n.jsxs)(i.span,{children:[(0,n.jsx)(i.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"STRIPE_WEBHOOK_SIGNING_SECRET"}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"="}),(0,n.jsx)(i.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"your_signing_secret"})]})})}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsxs)(i.strong,{children:["Do not forget that if you remove a webhook and create a new one, you need to update the signing secret inside the ",(0,n.jsx)(i.code,{children:".env"})," file."]})}),"\n",(0,n.jsx)(i.h3,{id:t[6].id,children:t[6].value}),"\n",(0,n.jsxs)(i.p,{children:["Make sure that every time you change the ",(0,n.jsx)(i.code,{children:".env"})," file, you restart the server."]}),"\n",(0,n.jsx)(i.p,{children:"The integration should work by default now. You can test it by going to the application and trying to buy coins."}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsxs)(i.em,{children:["If you’re testing the integration, you can use the test card number ",(0,n.jsx)(i.code,{children:"4242 4242 4242 4242"})," with any expiration date and CVC."]})}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"If you want to receive payments inside a production environment, you need to complete the business profile in the Stripe dashboard."})}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsxs)(i.strong,{children:["When going in production, do not forget to create another webhook for the production server and update the ",(0,n.jsx)(i.code,{children:".env"})," accordingly."]})})]})},"/docs/web/stripe",{filePath:"pages/docs/web/stripe.mdx",timestamp:1733605234e3,pageMap:s.v,frontMatter:{},title:"Stripe"},"undefined"==typeof RemoteContent?c:RemoteContent.useTOC)},2838:function(e,t,i){"use strict";i.d(t,{v:function(){return n}});let n=[{data:{apps:{title:"Apps",type:"page"},terms:{title:"Terms of Service",type:"page"},apk:{title:"APK Download",type:"page"},docs:{type:"page",title:"Quick Start"},contact:{type:"page",title:"Contact"},index:{title:"Documentation",display:"hidden"},buy:{title:"Buy Now",type:"page"}}},{name:"apk",route:"/apk",children:[{name:"index",route:"/apk",frontMatter:{sidebarTitle:"Index"}}]},{name:"apps",route:"/apps",children:[{data:{"mobile-app":{title:"Mobile App"},"web-app":{title:"Web App"}}},{name:"mobile-app",route:"/apps/mobile-app",frontMatter:{sidebarTitle:"Mobile App"}},{name:"web-app",route:"/apps/web-app",frontMatter:{sidebarTitle:"Web App"}}]},{name:"buy",route:"/buy",children:[{data:{index:{title:"Buy Biddo"}}},{name:"index",route:"/buy",frontMatter:{sidebarTitle:"Index"}}]},{name:"contact",route:"/contact",children:[{name:"contact",route:"/contact/contact",frontMatter:{sidebarTitle:"Contact"}}]},{name:"docs",route:"/docs",children:[{data:{index:{title:"Introduction"},server:"NodeJS Server","admin-panel":"Admin Panel","mobile-app":"Mobile App",web:"Web App"}},{name:"admin-panel",route:"/docs/admin-panel",children:[{data:{index:{title:"Setup"},settings:{title:"Settings"}}},{name:"index",route:"/docs/admin-panel",frontMatter:{sidebarTitle:"Index"}},{name:"screenshots",route:"/docs/admin-panel/screenshots",frontMatter:{sidebarTitle:"Screenshots"}},{name:"settings",route:"/docs/admin-panel/settings",frontMatter:{sidebarTitle:"Settings"}}]},{name:"index",route:"/docs",frontMatter:{sidebarTitle:"Index"}},{name:"mobile-app",route:"/docs/mobile-app",children:[{data:{"setup-prerequisites":{title:"Setup Prerequisites"},environment:{title:"Environment Variables"},"name-version-splash":{title:"Name, Version, Splash Screen"},"firebase-integration":{title:"Firebase Integration"},"google-maps-integration":{title:"Google Maps Integration"},architecture:{title:"Code Architecture"},"running-in-dev":{title:"Running in Development"},deploy:{title:"Deploy"},admob:{title:"Admob Integration"},"revenue-cat":"In App Purchases"}},{name:"admob",route:"/docs/mobile-app/admob",frontMatter:{sidebarTitle:"Admob"}},{name:"architecture",route:"/docs/mobile-app/architecture",frontMatter:{sidebarTitle:"Architecture"}},{name:"deploy",route:"/docs/mobile-app/deploy",children:[{data:{env:{title:"Environment Variables"},android:{title:"Android"},ios:{title:"iOS"},"secure-maps":{title:"Secure Google Maps Key"}}},{name:"android",route:"/docs/mobile-app/deploy/android",frontMatter:{sidebarTitle:"Android"}},{name:"env",route:"/docs/mobile-app/deploy/env",frontMatter:{sidebarTitle:"Env"}},{name:"ios",route:"/docs/mobile-app/deploy/ios",frontMatter:{sidebarTitle:"iOS"}},{name:"secure-maps",route:"/docs/mobile-app/deploy/secure-maps",frontMatter:{sidebarTitle:"Secure Maps"}}]},{name:"environment",route:"/docs/mobile-app/environment",frontMatter:{sidebarTitle:"Environment"}},{name:"firebase-integration",route:"/docs/mobile-app/firebase-integration",frontMatter:{sidebarTitle:"Firebase Integration"}},{name:"google-maps-integration",route:"/docs/mobile-app/google-maps-integration",frontMatter:{sidebarTitle:"Google Maps Integration"}},{name:"name-version-splash",route:"/docs/mobile-app/name-version-splash",frontMatter:{sidebarTitle:"Name Version Splash"}},{name:"revenue-cat",route:"/docs/mobile-app/revenue-cat",children:[{data:{index:{title:"Setup RevenueCat"},client:{title:"Mobile App Configuration"},server:{title:"Server Configuration"}}},{name:"client",route:"/docs/mobile-app/revenue-cat/client",frontMatter:{sidebarTitle:"Client"}},{name:"index",route:"/docs/mobile-app/revenue-cat",frontMatter:{sidebarTitle:"Index"}},{name:"server",route:"/docs/mobile-app/revenue-cat/server",frontMatter:{sidebarTitle:"Server"}}]},{name:"running-in-dev",route:"/docs/mobile-app/running-in-dev",frontMatter:{sidebarTitle:"Running in Dev"}},{name:"setup-prerequisites",route:"/docs/mobile-app/setup-prerequisites",frontMatter:{sidebarTitle:"Setup Prerequisites"}}]},{name:"server",route:"/docs/server",children:[{data:{"setup-prerequisites":{title:"Setup Prerequisites"},environment:{title:"Environment Variables"},"firebase-integration":{title:"Firebase Integration"},"google-bucket":{title:"Google Cloud Storage Integration"},"google-maps":{title:"Google Maps Integration"},architecture:{title:"Code Architecture"},"running-in-dev":{title:"Running in Development"},tutorials:{title:"Tutorials"},deploy:{title:"Deploy"}}},{name:"architecture",route:"/docs/server/architecture",frontMatter:{sidebarTitle:"Architecture"}},{name:"deploy",route:"/docs/server/deploy",frontMatter:{sidebarTitle:"Deploy"}},{name:"environment",route:"/docs/server/environment",frontMatter:{sidebarTitle:"Environment"}},{name:"firebase-integration",route:"/docs/server/firebase-integration",frontMatter:{sidebarTitle:"Firebase Integration"}},{name:"google-bucket",route:"/docs/server/google-bucket",frontMatter:{sidebarTitle:"Google Bucket"}},{name:"google-maps",route:"/docs/server/google-maps",frontMatter:{sidebarTitle:"Google Maps"}},{name:"running-in-dev",route:"/docs/server/running-in-dev",frontMatter:{sidebarTitle:"Running in Dev"}},{name:"setup-prerequisites",route:"/docs/server/setup-prerequisites",frontMatter:{sidebarTitle:"Setup Prerequisites"}},{name:"tutorials",route:"/docs/server/tutorials",children:[{data:{"new-module":{title:"Add a new module"}}},{name:"new-module",route:"/docs/server/tutorials/new-module",frontMatter:{sidebarTitle:"New Module"}}]}]},{name:"web",route:"/docs/web",children:[{data:{"setup-prerequisites":{title:"Setup Prerequisites"},environment:{title:"Environment Variables"},"firebase-integration":{title:"Firebase Integration"},"push-notifications":{title:"Enable Push Notifications"},stripe:{title:"Stripe Integration"},architecture:{title:"Code Architecture"},"running-in-dev":{title:"Running in Development"},publish:{title:"Publishing"},deploy:{title:"Deploy"}}},{name:"architecture",route:"/docs/web/architecture",frontMatter:{sidebarTitle:"Architecture"}},{name:"deploy",route:"/docs/web/deploy",frontMatter:{sidebarTitle:"Deploy"}},{name:"environment",route:"/docs/web/environment",frontMatter:{sidebarTitle:"Environment"}},{name:"firebase-integration",route:"/docs/web/firebase-integration",frontMatter:{sidebarTitle:"Firebase Integration"}},{name:"publish",route:"/docs/web/publish",frontMatter:{sidebarTitle:"Publish"}},{name:"push-notifications",route:"/docs/web/push-notifications",frontMatter:{sidebarTitle:"Push Notifications"}},{name:"running-in-dev",route:"/docs/web/running-in-dev",frontMatter:{sidebarTitle:"Running in Dev"}},{name:"setup-prerequisites",route:"/docs/web/setup-prerequisites",frontMatter:{sidebarTitle:"Setup Prerequisites"}},{name:"stripe",route:"/docs/web/stripe",frontMatter:{sidebarTitle:"Stripe"}}]}]},{name:"index",route:"/",frontMatter:{sidebarTitle:"Index"}},{name:"terms",route:"/terms",children:[{data:{index:{title:"Terms of Service"},privacy:{title:"Privacy Policy"},cookies:{title:"Cookies Policy"}}},{name:"cookies",route:"/terms/cookies",frontMatter:{sidebarTitle:"Cookies"}},{name:"index",route:"/terms",frontMatter:{sidebarTitle:"Index"}},{name:"privacy",route:"/terms/privacy",frontMatter:{sidebarTitle:"Privacy"}}]}]}},function(e){e.O(0,[5857,2888,9774,179],function(){return e(e.s=7269)}),_N_E=e.O()}]);